<div class="gallery">
    {% for block in section.blocks %}
    <div class = "image-wrap" style ="background-image: url(' {{ block.settings.image | img_url: '500x' }} ');">                                      
    </div>
    {% endfor %}
</div>

{% schema %}
{
	"name": "Gallery",
	"settings": [{
		"type": "select",
		"id": "pre-row",
		"label": "Images per row",
		"options": [{

				"value": "49.5%",
				"label": "2 per row"
			},
			{
				"value": "33%",
				"label": "3 per row"
			},
			{
				"value": "24.5%",
				"label": "4 per row"
			},
			{
				"value": "19.5%",
				"label": "5 per row"
			}
		],
		"default": "33%"

	}],
        "blocks": [
        {
            "type": "image",
            "name": "Image Block",
            "settings": [
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image"
                }
            ]
        }
    ]
}
{% endschema %}

{% style %}
    .image-wrap {
        display: inline-block;
        width: 33%;
        height: 500px;
        background-size: cover;
    }   
{% endstyle %}

{% javascript %}
{% endjavascript %}